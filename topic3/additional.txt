Предложения по улучшению:
1. Я убрал то, изменение в таблице messages которое было сделано на лету во время занятия. А именно ссылку на community_id. Так само по себе ошибочно, так как и community_id и to_user_id не должны быть одновременно NOT NULL. 
2. Групповые сообщения между большим количеством людей, я бы выделили в отдельную сущьность conversation, так как они существенно усложнены по сравнению с обычным чатом между двумя людьми. Там есть и админы, там важно понимать, когда кто из пользователей был добавлен, так как он по умолчанию видит историю только после своего добавления в групповой чат и так далее. И этот conversation уже связать один ко многим с users.
3. Вместо текстового поля messages.body наверное я бы использовал ссылку на текст в ElasticSearch так как в сообщениях очень важно уметь осуществлять полнотекстовый поиск.
4. Страну и город выделил бы в отдельные сущности. Слишком это важные вещи для социальной сети. Тут и геопозиция, разные законы в разных странах, выборка по ближайшим, дефолтные локали и тд и тп.
5. В media предлагаю сразу отойти от filename на uid. Там в любом случае должно быть специализированное решение для распределенного хранения контента. С шардами, дублированием и прочими радостями. 